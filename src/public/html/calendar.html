<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Calendar - Evently</title>

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.min.css"
    />

    <link rel="stylesheet" href="../css/styles.css" />

    <style>
      /* --- ADDED CUSTOM BACKGROUND STYLE --- */
      .calendar-page-shell {
        /* 1. First layer: Red color (RGB 200,16,46) with 0.35 (35%) Opacity 
           2. Second layer: The image URL
        */
        background:
          linear-gradient(rgba(200, 16, 46, 0.35), rgba(200, 16, 46, 0.35)),
          url("../assets/sp_img4.jpg");

        /* Ensure the image covers the area and stays fixed */
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        min-height: calc(100vh - 76px); /* Full height minus navbar */
      }

      /* Make the page header text white to stand out against the background */
      /* Added slightly stronger shadow for readability since opacity is lower */
      .calendar-page-shell h1 {
        color: white;
        text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
      }

      .calendar-page-shell p.text-muted {
        color: rgba(255, 255, 255, 0.9) !important;
        text-shadow: 0 1px 4px rgba(0, 0, 0, 0.3);
      }
    </style>
    <script src="../js/notifications.js" type="module"></script>
    <script src="../js/navbar.js" type="module" defer></script>
  </head>
  <body>
    <div class="calendar-page-shell">
      <div class="container py-4">
        <div
          class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-3 mb-4"
        >
          <div>
            <h1 class="h2 fw-bold mb-1">My Calendar</h1>
            <p class="text-muted mb-0">
              View and manage your registered events
            </p>
          </div>
          <a
            href="dashboard.html"
            class="btn btn-light shadow-sm text-primary fw-semibold"
          >
            <i class="bi bi-grid-3x3-gap me-2"></i>Browse Events
          </a>
        </div>

        <div class="row g-4 mb-4">
          <div class="col-md-6">
            <div class="card border-0 calendar-summary-card shadow-sm">
              <div class="card-body d-flex align-items-center gap-3">
                <div
                  style="
                    width: 56px;
                    height: 56px;
                    border-radius: 16px;
                    background: linear-gradient(135deg, #c8102e, #a00d24);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                  "
                >
                  <i class="bi bi-calendar-check text-white fs-4"></i>
                </div>
                <div>
                  <h6 class="text-muted mb-1 small">Total Registered Events</h6>
                  <p id="totalRegistered" class="h2 fw-bold mb-0 text-gradient">
                    0
                  </p>
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="card border-0 calendar-summary-card shadow-sm">
              <div class="card-body d-flex align-items-center gap-3">
                <div
                  style="
                    width: 56px;
                    height: 56px;
                    border-radius: 16px;
                    background: linear-gradient(135deg, #c8102e, #a00d24);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                  "
                >
                  <i class="bi bi-trophy text-white fs-4"></i>
                </div>
                <div>
                  <h6 class="text-muted mb-1 small">Total CCA Points</h6>
                  <p id="totalPoints" class="h2 fw-bold mb-0 text-gradient">
                    0
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div
          class="calendar-tabs mb-4 p-1 bg-white rounded-pill d-inline-flex shadow-sm"
        >
          <button class="calendar-tab active" data-view="calendar">
            <i class="bi bi-calendar3 me-2"></i>Calendar
          </button>
          <button class="calendar-tab" data-view="list">
            <i class="bi bi-list-ul me-2"></i>List View
          </button>
          <button class="calendar-tab" data-view="past">
            <i class="bi bi-clock-history me-2"></i>Past Events
          </button>
        </div>

        <div id="filterToolbar" class="row g-3 mb-4 d-none">
          <div class="col-md-8">
            <div class="input-group shadow-sm">
              <span class="input-group-text bg-white border-end-0">
                <i class="bi bi-search text-muted"></i>
              </span>
              <input
                type="text"
                id="searchInput"
                class="form-control border-start-0 ps-0"
                placeholder="Search by event title or venue..."
              />
            </div>
          </div>
          <div class="col-md-4">
            <select id="categoryFilter" class="form-select shadow-sm">
              <option value="all">All Categories</option>
              <option value="Service">Service / Community</option>
              <option value="Enrichment">Enrichment</option>
              <option value="Participation">Participation</option>
              <option value="Uncategorized">Others</option>
            </select>
          </div>
        </div>

        <section id="calendarView" class="calendar-view-section">
          <div class="card calendar-hero-card mb-3 shadow-sm border-0">
            <div
              class="card-body d-flex flex-wrap justify-content-between align-items-center gap-3"
            >
              <div>
                <div class="text-muted small mb-1">Viewing month</div>
                <h2 id="calendarMonthLabel" class="h4 fw-bold mb-0">
                  Loadingâ€¦
                </h2>
              </div>

              <div class="d-flex align-items-center gap-2">
                <button id="btnPrevMonth" class="calendar-month-nav-btn">
                  <i class="bi bi-chevron-left"></i>
                </button>
                <button id="btnNextMonth" class="calendar-month-nav-btn">
                  <i class="bi bi-chevron-right"></i>
                </button>
              </div>
            </div>
          </div>

          <div id="calendarStrip"></div>
        </section>

        <section
          id="listView"
          class="calendar-view-section d-none"
          aria-hidden="true"
        >
          <div id="listEvents"></div>
        </section>

        <section
          id="pastView"
          class="calendar-view-section d-none"
          aria-hidden="true"
        >
          <div id="pastEvents"></div>
        </section>
      </div>
    </div>

     

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script type="module" src="../js/calendar.js"></script>
    <link rel="stylesheet" href="../css/chatbot.css" />

    <div id="chatbot-container">
      <button id="chatbot-fab" class="chatbot-fab" title="Open AI Assistant">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path
            d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"
          ></path>
        </svg>
      </button>

      <div id="chatbot-modal" class="chatbot-modal hidden">
        <div class="chatbot-header">
          <div class="chatbot-title">
            <h3>AI Assistant</h3>
            <p>Ask me anything about this website</p>
          </div>
          <button
            id="chatbot-close"
            class="chatbot-close"
            title="Close chatbot"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <line x1="18" y1="6" x2="6" y2="18"></line>
              <line x1="6" y1="6" x2="18" y2="18"></line>
            </svg>
          </button>
        </div>

        <div id="chatbot-messages" class="chatbot-messages">
          <div class="chatbot-message bot-message">
            <div class="message-content">
              <p>Hi! I'm your AI Assistant. How can I help you today?</p>
            </div>
          </div>
        </div>

        <div class="chatbot-input-area">
          <input
            id="chatbot-input"
            type="text"
            class="chatbot-input"
            placeholder="Type your message..."
            autocomplete="off"
          />
          <button id="chatbot-send" class="chatbot-send" title="Send message">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <line x1="22" y1="2" x2="11" y2="13"></line>
              <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
            </svg>
          </button>
        </div>
      </div>
    </div>
    <script src="../js/chatbot.js"></script>
   
  </body>
</html>
